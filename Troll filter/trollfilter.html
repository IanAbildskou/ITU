<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="stylesheet.css">
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,100' rel='stylesheet' type='text/css'>
    <title>
        Troll filter
    </title>
</head>
<body>
    <img src="jb.jpg">
    <div id="commentSystem">
        <h1>
            COMMENTS
        </h1>
        <div id="commentField">
            <textarea onfocus="clearContents(this);" id="textArea">Enter your opinion here!</textarea>
            <button id="button">Submit</button>
            <p id="counter">Counter: 0</p>
        </div>
        
        <script>
            //** VARIABlES **////** VARIABlES **////** VARIABlES **////** VARIABlES **//
            //** VARIABlES **////** VARIABlES **////** VARIABlES **////** VARIABlES **//
            
            var savedText;
            var lookFor = ["fuck" , "fucking" , "fucker"];
            var replaceWith = ["elsk" , "loving" , "lover"];
            var counter;
            var rgbaMultiplier;
            var textArray;
            var newText;
            var id;
            var hour;
            var minute;
            var second;
            var idDate;
            var n;
            var N;
            
            //** FUNCTIONS **////** FUNCTIONS **////** FUNCTIONS **////** FUNCTIONS **//
            //** FUNCTIONS **////** FUNCTIONS **////** FUNCTIONS **////** FUNCTIONS **//
            
            function clearContents(element) 
            {
                element.value = "";
            }
            
            function idAndDate(idDate)
            {
                id = Math.floor(Math.random() * 10000);
                hour = new Date();
                hour = hour.getHours();
                minute = new Date();
                minute = minute.getMinutes();
                second = new Date();
                second = second.getSeconds();
                idDate = "<span>User ID: " + id + " - time: " + hour + ":" + minute + ":" + second + "</span><br>";
                return idDate;
            }
            
            function findAndReplace(newText)
            { 
                textArray = document.getElementById("textArea").value.split(" ");
                for (n=0; n<document.getElementById("textArea").value.length; n++)
                {
                    for (N=0; N<lookFor.length; N++)
                    {
                        if( textArray[n] == lookFor[N])
                        {
                            textArray[n] = replaceWith[N];
                        }
                    }
                }
                newText = textArray.join(" ");
                return newText;
            }
            
            //** EVENTLISTENERS **////** EVENTLISTENERS **////** EVENTLISTENERS **////** EVENTLISTENERS **//
            //** EVENTLISTENERS **////** EVENTLISTENERS **////** EVENTLISTENERS **////** EVENTLISTENERS **//
            
            document.getElementById("textArea").addEventListener("keydown", function(event)
            {
                if(event.keyCode == 32)
                {
                    textArray = document.getElementById("textArea").value.split(" ");
                    for (n=0; n<document.getElementById("textArea").value.length; n++)
                    {
                        for (N=0; N<lookFor.length; N++)
                        {
                            if( textArray[n] == lookFor[N])
                            {
                                counter++;
                                document.getElementById("counter").innerHTML = "Counter: " + counter;
                                rgbaMultiplier = counter * 0.1;
                                document.getElementById("textArea").style.backgroundColor = "rgba(0, 255, 0, " + rgbaMultiplier +")";
                            }
                        }
                    }  
                }
                counter = 0;
            });
                                                                
            document.getElementById("button").addEventListener("click", function()
            {   
                counter = 0;
                document.getElementById("counter").innerHTML = "Counter: " + counter;
                document.getElementById("textArea").style.backgroundColor = "rgba(0, 255, 0, 0)";
                if(document.getElementById("textArea").value.length == 0)
                {
                    alert("You need to wright something first!");   
                }
                
                else if(document.getElementById("textArea").value == "Enter your opinion here!")
                {
                    alert("You need to wright something first!");   
                }
                
                else
                {
                    if(savedText == undefined)
                    {
                        
                        savedText = idAndDate() + "<p>" + findAndReplace() + "</p>";
                        document.getElementById("comment").innerHTML = savedText;
                        document.getElementById("textArea").value = null;
                    }

                    else
                    {
                        savedText = idAndDate() +  "<p>" + findAndReplace() + "</p>" + savedText;
                        document.getElementById("comment").innerHTML = savedText;
                        document.getElementById("textArea").value = null;
                    }  
                } 
            });
        </script>
        
        <div id="comment"></div>
        <div id="fakeComments">  
            <span>
                User ID: 2341 - time: 02:24:4
            </span>
            <br>
            <p>
                The more Justin Biebers life disintegrates into a drug and alcohol fuelled orgy of mayhem the more compelling I find him. Everyday I just can't seem to wait to find out what his crazy antics are next.Hes everything I could want in a multimillionaire child star gone wrong.
            </p>
            <span>
                User ID: 8027 - time: 02:53:28
            </span>
            <br>
            <p>
                He'll be dead before 30.
            </p>
            <span>
                User ID: 1458 - time: 03:21:58
            </span>
            <br>
            <p>
                I sincerely hope not. That would ruin it for everyone. He's capable of so much! He's been arrested more times than I care to remember for small petty crimes like speeding, having a bit of pot on him now ramming a minivan with an ATV. He's only 20 years old! He's just starting out. Just think what the guy is capable of by the time he's 40. I had high hopes for Macaulay Culkin back in the day but he faded away. Justin Bieber is made of stronger stuff, he is greatness in the making. Just wait and see
            </p>
            <span>
                User ID: 2984 - time: 03:55:42
            </span>
            <br>
            <p>
                Leave the poor boy alone, he's had an awfully privileged lifeâ€¦ Lifes tough in the gateaux.
            </p>
        </div>
    </div>
</body>
